"<AddOnInstructionDefinition CreatedBy=\"Not Available\" CreatedDate=\"2012-10-01T18:56:53.162Z\" EditedBy=\"PROCESS\\Library\" EditedDate=\"2016-01-29T21:01:04.157Z\" ExecuteEnableInFalse=\"true\" ExecutePostscan=\"false\" ExecutePrescan=\"true\" Name=\"P_Gate\" Revision=\"3.5\" RevisionExtension=\"01 Release\" SoftwareRevision=\"v18.02\" Vendor=\"Rockwell Automation\">\n<Description>\n<CData>\nCondition Gate/Delay\n</CData>\n</Description>\n<RevisionNote>\n<CData>\nSee V3.5-xx Release Notes for details. Unchanged, up-rev only for V3.5 Library.\n</CData>\n</RevisionNote>\n<AdditionalHelpText>\n<CData>\nCopyright \u00a9 Rockwell Automation, Inc.  All Rights Reserved.\n\nThis Instruction provides a \"gate\" for a discrete Input signal and\nprovides on-delay and off-delay timing for the gated signal.\n\nWhen the Gate input is true, the instruction Input is passed through\nto the Output, with on-delay and off-delay timing applied.\n\nWhen the Gate input is false, the Output is kept off\n(note: off-delay still applies!)\n\nThis instruction is usually used between a comparison\n(analog threshold with deadband or discrete logic)\nand a P_Alarm instance, but may be used as a\ngated on-delay/off-delay timer generally.\n\nWhen EnableIn  is FALSE (e.g., on a false LD rung),\nthe Input \"Inp\" is inverted.  Note that the Gate\ninput (Inp_Gate) is NOT inverted!!!\n</CData>\n</AdditionalHelpText>\n<Parameters>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"EnableIn\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nEnable Input - System Defined Parameter\n</CData>\n</Description>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"EnableOut\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"false\">\n<Description>\n<CData>\nEnable Output - System Defined Parameter\n</CData>\n</Description>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"Inp\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"true\">\n<Description>\n<CData>\nInput Condition: e.g., result of comparison\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"Inp_Gate\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"true\">\n<Description>\n<CData>\nGate Input: 1=enable On Delay / Off Delay after Gate Delay, 0=disable\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n1\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"1\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"DINT\" ExternalAccess=\"Read/Write\" Name=\"Cfg_GateDly\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nGate Delay (s): time after Gate Input true to enable On/Off Delay\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"DINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"DINT\" ExternalAccess=\"Read/Write\" Name=\"Cfg_OnDly\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nOn Delay (s): If Gate Delay done, time Inp must be true to set Out true\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"DINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"DINT\" ExternalAccess=\"Read/Write\" Name=\"Cfg_OffDly\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nOff Delay (s): Time after Inp  or Gate goes to 0 for Out to go to 0\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"DINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"Out\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"true\">\n<Description>\n<CData>\nOutput after On Delay, Off Delay, enabled by Gate\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"Sts_Gate\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"true\">\n<Description>\n<CData>\n1=Gate Delay done, Output is enabled\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"Sts_Err\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"true\">\n<Description>\n<CData>\n1=Error in Config (see detail Err_ bits for reason), display icon\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"Err_Timer\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"false\">\n<Description>\n<CData>\n1=Error in Config: On Delay, Off Delay, Gate Delay Time Invalid (use 0 to 2147483 s)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"P_Gate\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"false\">\n<Description>\n<CData>\nUnique Parameter Name for auto - discovery\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n</Parameters>\n<LocalTags>\n<LocalTag DataType=\"TIMER\" ExternalAccess=\"Read Only\" Name=\"Wrk_OffDlyT\">\n<Description>\n<CData>\nOff Delay Timer\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[0,0,0]\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<Structure DataType=\"TIMER\">\n<DataValueMember DataType=\"DINT\" Name=\"PRE\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"DINT\" Name=\"ACC\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"EN\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"TT\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"DN\" Value=\"0\"/>\n</Structure>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"TIMER\" ExternalAccess=\"Read Only\" Name=\"Wrk_OnDlyT\">\n<Description>\n<CData>\nOn Delay Timer\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[0,0,0]\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<Structure DataType=\"TIMER\">\n<DataValueMember DataType=\"DINT\" Name=\"PRE\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"DINT\" Name=\"ACC\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"EN\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"TT\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"DN\" Value=\"0\"/>\n</Structure>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"TIMER\" ExternalAccess=\"Read Only\" Name=\"Wrk_GateT\">\n<Description>\n<CData>\nGate Delay Timer\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[0,0,0]\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<Structure DataType=\"TIMER\">\n<DataValueMember DataType=\"DINT\" Name=\"PRE\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"DINT\" Name=\"ACC\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"EN\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"TT\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"DN\" Value=\"0\"/>\n</Structure>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_20\" ExternalAccess=\"Read/Write\" Name=\"Cfg_InpCond\">\n<Description>\n<CData>\nDisplayed text of P_Gate's Input (Inp) Condition\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[15,'Input Condition$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"15\">\n<CData>\n'Input Condition'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_12\" ExternalAccess=\"Read Only\" Name=\"Inf_Lib\">\n<Description>\n<CData>\nDisplay Library for Faceplate call-up\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[6,'RA-BAS$00$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"6\">\n<CData>\n'RA-BAS'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_16\" ExternalAccess=\"Read Only\" Name=\"Inf_Type\">\n<Description>\n<CData>\nMust contain AOI name, used for HMI and Information S/W\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[6,'P_Gate$00$00$00$00$00$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"6\">\n<CData>\n'P_Gate'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_20\" ExternalAccess=\"Read/Write\" Name=\"Cfg_GateCond\">\n<Description>\n<CData>\nDisplayed text of P_Gate's Gating (Inp_Gate) Condition\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[16,'Gating Condition$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"16\">\n<CData>\n'Gating Condition'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"SINT\" ExternalAccess=\"Read/Write\" Name=\"Inf_Tab\" Radix=\"Decimal\">\n<Description>\n<CData>\nTab to display (FTView ME)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"SINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</LocalTag>\n</LocalTags>\n<Routines>\n<Routine Name=\"EnableInFalse\" Type=\"RLL\">\n<Description>\n<CData>\nSame as main Logic routine, except Inp is inverted (for use in LD logic)  (Inp_Gate is NOT inverted!!!)\n</CData>\n</Description>\n<RLLContent>\n<Rung Number=\"0\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nEnableIn FALSE :  CONFIGURATION PROCESSING\n============================================================\nFlag a Configuration Error if the Gate Delay, On Delay\nor Off Delay timer preset is invalid\n(and set timer to default zero preset, non-faulting value).\n</CData>\n</Comment>\n<Text>\n<CData>\n[MUL(Cfg_GateDly,1000,Wrk_GateT.PRE) XIC(Wrk_GateT.PRE.31) CLR(Wrk_GateT.PRE) ,MUL(Cfg_OnDly,1000,Wrk_OnDlyT.PRE) XIC(Wrk_OnDlyT.PRE.31) CLR(Wrk_OnDlyT.PRE) ,MUL(Cfg_OffDly,1000,Wrk_OffDlyT.PRE) XIC(Wrk_OffDlyT.PRE.31) CLR(Wrk_OffDlyT.PRE) ]OTE(Err_Timer)OTE(Sts_Err);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"1\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nGATE DELAY, ON DELAY, OFF DELAY PROCESSING\n============================================================\nFOR THE ENABLE_IN_FALSE ROUTINE, the CONDITION Input is\nINVERTED, to support the   XIC (condition)  P_Gate (P_Gate backing tag)\nconstruct for instantiation.  This will use Inp = 1,\nmaking the condition input follow the rung condition.\n\nIf the Gate Input is true, run the Gate Delay timer.\nOnce the Gate Delay is complete, enable the\nOn Delay and Off Delay that follow the INVERTED input.\n\nReport the Gate Delay status and the final Output status (after all delays).\n\n@@@@@  NOTE: Doubled TONs are used to ensure that  @@@@@\n@@@@@  .DN bit transitions on same scan if Preset = 0 !  @@@@@\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(Inp_Gate) TON(Wrk_GateT,?,?) TON(Wrk_GateT,?,?) ,XIC(Wrk_GateT.DN) OTE(Sts_Gate) XIO(Inp) TON(Wrk_OnDlyT,?,?) TON(Wrk_OnDlyT,?,?) ,[XIC(Inp) ,XIO(Inp_Gate) ] TON(Wrk_OffDlyT,?,?) TON(Wrk_OffDlyT,?,?) ,XIC(Wrk_OnDlyT.DN) OTL(Out) ,XIC(Wrk_OffDlyT.DN) OTU(Out) ];\n</CData>\n</Text>\n</Rung>\n</RLLContent>\n</Routine>\n<Routine Name=\"Logic\" Type=\"RLL\">\n<Description>\n<CData>\nGate the input and apply on-delay and off-delay timing\n</CData>\n</Description>\n<RLLContent>\n<Rung Number=\"0\" Type=\"N\">\n<Comment>\n<CData>\nCopyright \u00a9 Rockwell Automation, Inc.  All Rights Reserved.\n============================================================\nP_Gate:  PROCESS -- CONDITION GATE / DELAY\n============================================================\nRevision 3.5-01 Release  2016-01-29:  See V3.1-xx Release Notes for details.\nV3.0-00  2013-06-30:  Initial Release (Part of Library of Process Objects V3.0, so Major = 3).\nV3.1-00  2014-07-08:  Modified first rung of Logic to show all Strings.\nV3.1-01  2014-09-03:  Exposed Gate, On-Delay and Off-Delay timers ACC/PRE (read-only).\nV3.1-05  2016-01-22:  Corrected logic when using analog threshold with deadband.\nV3.5-01  2016-01-29:  Unchanged, up-rev only for V3.5 Library.\n============================================================\nThis Instruction provides a \"gate\" for a discrete Input signal and\nprovides on-delay and off-delay timing for the gated signal.\n\nWhen the Gate input is true, the instruction Input is passed through\nto the Output, with on-delay and off-delay timing applied.\n\nWhen the Gate input is false, the Output is kept off\n(note: off-delay still applies!)\n\nThis instruction is usually used between a comparison\n(analog threshold with deadband or discrete logic)\nand a P_Alarm instance, but may be used as a\ngated on-delay/off-delay timer generally.\n\nWhen EnableIn  is FALSE (e.g., on a false LD rung),\nthe Input \"Inp\" is inverted.  Note that the Gate\ninput (Inp_Gate) is NOT inverted!!!\n============================================================\nSHOW LOCAL STRINGS\n============================================================\nThe STRINGs containing the text associated with each instance of this\ninstruction cannot be Input or Output Parameters, because STRINGs are not\n 'atomic' types. (Inputs and Outputs must be SINT, INT, DINT, REAL, or BOOL.)\n\nIn order to make it easier to find and configure these STRINGs, this rung\nwas added.  THE JMP (and the LBL on the following rung)\nMUST NOT BE REMOVED!!!\n\nTo view the STRINGs, go to the instruction instance (in LD or FBD), RIGHT-click\nto bring up the context menu and select \"Open Instruction Logic\".\nThis rung will appear with the STRING values for the selected instance.\nYou may double-click the STRING values here to modify them as well.\n\n#####  V3.1-00  2014-07-08: Added Inf_Type to displayed Strings  #####\n</CData>\n</Comment>\n<Text>\n<CData>\nJMP(SkipText)LOWER(Cfg_InpCond,Cfg_GateCond)LOWER(Inf_Lib,Inf_Type);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"1\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nCONFIGURATION PROCESSING\n============================================================\nFlag a Configuration Error if the Gate Delay, On Delay\nor Off Delay timer preset is invalid\n(and set timer to default zero preset, non-faulting value).\n</CData>\n</Comment>\n<Text>\n<CData>\nLBL(SkipText)[MUL(Cfg_GateDly,1000,Wrk_GateT.PRE) XIC(Wrk_GateT.PRE.31) CLR(Wrk_GateT.PRE) ,MUL(Cfg_OnDly,1000,Wrk_OnDlyT.PRE) XIC(Wrk_OnDlyT.PRE.31) CLR(Wrk_OnDlyT.PRE) ,MUL(Cfg_OffDly,1000,Wrk_OffDlyT.PRE) XIC(Wrk_OffDlyT.PRE.31) CLR(Wrk_OffDlyT.PRE) ]OTE(Err_Timer)OTE(Sts_Err);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"2\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nGATE DELAY, ON DELAY, OFF DELAY PROCESSING\n============================================================\nIf the Gate Input is true, run the Gate Delay timer.\nOnce the Gate Delay is complete, enable the\nOn Delay and Off Delay that follow the input.\n\nReport the Gate Delay status and the final Output status (after all delays).\n\n@@@@@  NOTE: Doubled TONs are used to ensure that  @@@@@\n@@@@@  .DN bit transitions on same scan if Preset = 0 !  @@@@@\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(Inp_Gate) TON(Wrk_GateT,?,?) TON(Wrk_GateT,?,?) ,XIC(Wrk_GateT.DN) OTE(Sts_Gate) XIC(Inp) TON(Wrk_OnDlyT,?,?) TON(Wrk_OnDlyT,?,?) ,[XIO(Inp) ,XIO(Inp_Gate) ] TON(Wrk_OffDlyT,?,?) TON(Wrk_OffDlyT,?,?) ,XIC(Wrk_OnDlyT.DN) OTL(Out) ,XIC(Wrk_OffDlyT.DN) OTU(Out) ];\n</CData>\n</Text>\n</Rung>\n</RLLContent>\n</Routine>\n<Routine Name=\"Prescan\" Type=\"RLL\">\n<Description>\n<CData>\nSet the Gate Input to 1 (default value) on prescan\n</CData>\n</Description>\n<RLLContent>\n<Rung Number=\"0\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nPRESCAN PROCESSING\n============================================================\nSet the Gate Input to 1 (default value) on Prescan to enable\nstatuses / alarms that have Gate input unconnected.\n</CData>\n</Comment>\n<Text>\n<CData>\nOTL(Inp_Gate);\n</CData>\n</Text>\n</Rung>\n</RLLContent>\n</Routine>\n</Routines>\n<Dependencies>\n<Dependency Name=\"STRING_20\" Type=\"DataType\"/>\n<Dependency Name=\"STRING_12\" Type=\"DataType\"/>\n</Dependencies>\n</AddOnInstructionDefinition>"