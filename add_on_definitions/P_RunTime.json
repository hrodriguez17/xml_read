"<AddOnInstructionDefinition CreatedBy=\"Not Available\" CreatedDate=\"2008-04-01T18:56:21.678Z\" EditedBy=\"PROCESS\\Library\" EditedDate=\"2016-01-29T18:07:38.027Z\" ExecuteEnableInFalse=\"true\" ExecutePostscan=\"false\" ExecutePrescan=\"true\" Name=\"P_RunTime\" Revision=\"3.5\" RevisionExtension=\"01 Release\" SoftwareRevision=\"v18.02\" Vendor=\"Rockwell Automation\">\n<Description>\n<CData>\nRun Time and Starts\n</CData>\n</Description>\n<RevisionNote>\n<CData>\nSee V3.5-xx Release Notes for details. Unmodified, up-rev only for V3.5.01 Release.\n</CData>\n</RevisionNote>\n<AdditionalHelpText>\n<CData>\nCopyright \u00a9 Rockwell Automation, Inc.  All Rights Reserved.\n\nThis Instruction monitors the \"Running\" and \"Starting\" Status of a motor or other device and  provides:\n\n*  Total accumulated run time, in 1/10 hour increments (hour meter)\n*  Total number of starts or start attemptes (count)\n*  Maximum continuous run time for any start (hours)\n*  Program and Maintenance Commands to allow clearing of the totals/maximum\n</CData>\n</AdditionalHelpText>\n<Parameters>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"EnableIn\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nEnable Input - System Defined Parameter\n</CData>\n</Description>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read Only\" Name=\"EnableOut\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"false\">\n<Description>\n<CData>\nEnable Output - System Defined Parameter\n</CData>\n</Description>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"Inp_Starting\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"true\">\n<Description>\n<CData>\n1=Motor is Starting (from motor instruction)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"Inp_Running\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"true\">\n<Description>\n<CData>\n1=Motor is Running (from motor instruction)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n1\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"1\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"Cfg_PCmdClear\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\n1=Clear Program Commands on receipt\n0=Leave Set\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n1\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"1\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"PCmd_ClearStarts\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nProgram Command to Clear Count of Starts (attempts)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"PCmd_ClearMaxHrs\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nProgram Command to Clear Maximum (continuous) Run Time for any start\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"PCmd_ClearTotHrs\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nProgram Command to Clear Total Running Time\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"MCmd_ClearStarts\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nMaintenance Command to Clear Count of Starts (attempts)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"MCmd_ClearMaxHrs\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nMaintenance Command to Clear Maximum (continuous) Run Time for any start\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"MCmd_ClearTotHrs\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Input\" Visible=\"false\">\n<Description>\n<CData>\nMaintenance Command to Clear Total Running Time\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"DINT\" ExternalAccess=\"Read Only\" Name=\"Val_Starts\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"true\">\n<Description>\n<CData>\nTotal number of motor starts or attempts\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"DINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"REAL\" ExternalAccess=\"Read Only\" Name=\"Val_CurRunHrs\" Radix=\"Float\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"true\">\n<Description>\n<CData>\nCurrent running time this start (hours)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0.00000000e+000\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"REAL\" Radix=\"Float\" Value=\"0.0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"REAL\" ExternalAccess=\"Read Only\" Name=\"Val_MaxRunHrs\" Radix=\"Float\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"true\">\n<Description>\n<CData>\nMaximum continuous running time for a given start (hours)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0.00000000e+000\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"REAL\" Radix=\"Float\" Value=\"0.0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"REAL\" ExternalAccess=\"Read Only\" Name=\"Val_TotRunHrs\" Radix=\"Float\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"true\">\n<Description>\n<CData>\nTotal accumulated running time (hours)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0.00000000e+000\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"REAL\" Radix=\"Float\" Value=\"0.0\"/>\n</DefaultData>\n</Parameter>\n<Parameter DataType=\"BOOL\" ExternalAccess=\"Read/Write\" Name=\"P_RunTime\" Radix=\"Decimal\" Required=\"false\" TagType=\"Base\" Usage=\"Output\" Visible=\"false\">\n<Description>\n<CData>\nUnique Parameter Name for auto - discovery\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"BOOL\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</Parameter>\n</Parameters>\n<LocalTags>\n<LocalTag DataType=\"DINT\" ExternalAccess=\"None\" Name=\"Wrk_CurHours\" Radix=\"Decimal\">\n<Description>\n<CData>\nWhole hours of current run time\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"DINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"TIMER\" ExternalAccess=\"None\" Name=\"Wrk_CurRunT\">\n<Description>\n<CData>\nTimer for timing current run time\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[0,2147483647,0]\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<Structure DataType=\"TIMER\">\n<DataValueMember DataType=\"DINT\" Name=\"PRE\" Radix=\"Decimal\" Value=\"2147483647\"/>\n<DataValueMember DataType=\"DINT\" Name=\"ACC\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"EN\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"TT\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"DN\" Value=\"0\"/>\n</Structure>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"DINT\" ExternalAccess=\"None\" Name=\"Wrk_TotTenths\" Radix=\"Decimal\">\n<Description>\n<CData>\nTenths of hours of total run time\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"DINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"COUNTER\" ExternalAccess=\"None\" Name=\"Wrk_Starts\">\n<Description>\n<CData>\nCounter for counting motor starts\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[0,2147483647,0]\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<Structure DataType=\"COUNTER\">\n<DataValueMember DataType=\"DINT\" Name=\"PRE\" Radix=\"Decimal\" Value=\"2147483647\"/>\n<DataValueMember DataType=\"DINT\" Name=\"ACC\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"CU\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"CD\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"DN\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"OV\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"UN\" Value=\"0\"/>\n</Structure>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"TIMER\" ExternalAccess=\"None\" Name=\"Wrk_TotRunT\">\n<Description>\n<CData>\nRetentive timer for timing 0.1 hour total run time\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[0,2147483647,0]\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<Structure DataType=\"TIMER\">\n<DataValueMember DataType=\"DINT\" Name=\"PRE\" Radix=\"Decimal\" Value=\"2147483647\"/>\n<DataValueMember DataType=\"DINT\" Name=\"ACC\" Radix=\"Decimal\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"EN\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"TT\" Value=\"0\"/>\n<DataValueMember DataType=\"BOOL\" Name=\"DN\" Value=\"0\"/>\n</Structure>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"REAL\" ExternalAccess=\"None\" Name=\"Wrk_MaxHours\" Radix=\"Float\">\n<Description>\n<CData>\nInternal Maximum Run Hours\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0.00000000e+000\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"REAL\" Radix=\"Float\" Value=\"0.0\"/>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"SINT\" ExternalAccess=\"Read/Write\" Name=\"Inf_Tab\" Radix=\"Decimal\">\n<Description>\n<CData>\nTab to display (FTView ME)\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n0\n</CData>\n</DefaultData>\n<DefaultData Format=\"Decorated\">\n<DataValue DataType=\"SINT\" Radix=\"Decimal\" Value=\"0\"/>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_16\" ExternalAccess=\"Read Only\" Name=\"Inf_Type\">\n<Description>\n<CData>\nMust contain AOI name, used for HMI and Information S/W\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[9,'P_RunTime$00$00$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"9\">\n<CData>\n'P_RunTime'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_20\" ExternalAccess=\"Read/Write\" Name=\"Cfg_Label\">\n<Description>\n<CData>\nLabel for graphic symbol displayed on HMI\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[8,'Run Time$00$00$00$00$00$00$00$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"8\">\n<CData>\n'Run Time'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_20\" ExternalAccess=\"Read/Write\" Name=\"Cfg_Tag\">\n<Description>\n<CData>\nTagname for display on HMI\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[9,'P_RunTime$00$00$00$00$00$00$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"9\">\n<CData>\n'P_RunTime'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_40\" ExternalAccess=\"Read/Write\" Name=\"Cfg_Desc\">\n<Description>\n<CData>\nDescription for display on HMI\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[28,'Accumulated Run Time (Hours)$00$00$00$00$00$00$00$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"28\">\n<CData>\n'Accumulated Run Time (Hours)'\n</CData>\n</DefaultData>\n</LocalTag>\n<LocalTag DataType=\"STRING_12\" ExternalAccess=\"Read Only\" Name=\"Inf_Lib\">\n<Description>\n<CData>\nDisplay Library for Faceplate call-up\n</CData>\n</Description>\n<DefaultData Format=\"L5K\">\n<CData>\n[6,'RA-BAS$00$00$00$00$00$00']\n</CData>\n</DefaultData>\n<DefaultData Format=\"String\" Length=\"6\">\n<CData>\n'RA-BAS'\n</CData>\n</DefaultData>\n</LocalTag>\n</LocalTags>\n<Routines>\n<Routine Name=\"EnableInFalse\" Type=\"RLL\">\n<Description>\n<CData>\nFalse Rung or Enable In False: as if motor is Stopped\n</CData>\n</Description>\n<RLLContent>\n<Rung Number=\"0\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nENABLE-IN FALSE HANDLING\n============================================================\nEnableIn False is treated the same as \"Motor Stopped\" --\nCommands are still processed, \ntotal run time is held (RTO), the Starts counter is prepared for\nthe next start (.CU clears on CTU with AFI), and the\nCurrent Run Time is cleared (TON false).\n============================================================\nCOMMAND PROCESSING\n============================================================\nThese rungs handle received Commands.  This object has no Modes and\nCommands are accepted regardless of Mode.  Commands should be\nrestriceted to authorized personnel (typically at a maintenance level).\n\nPCmd_ClearTotHrs: Program Command to Clear Total Runtime Hours\nMCmd_ClearTotHrs: Maintenance Command to Clear Total Runtime Hours\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(PCmd_ClearTotHrs) [XIC(Cfg_PCmdClear) OTU(PCmd_ClearTotHrs) ,NOP() ] ,XIC(MCmd_ClearTotHrs) OTU(MCmd_ClearTotHrs) ]RES(Wrk_TotRunT)CLR(Wrk_TotTenths);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"1\" Type=\"N\">\n<Comment>\n<CData>\nPCmd_ClearStarts: Program Command to Clear Count of Starts\nMCmd_ClearStarts: Maintenance Command to Clear Count of Starts\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(PCmd_ClearStarts) [XIC(Cfg_PCmdClear) OTU(PCmd_ClearStarts) ,NOP() ] ,XIC(MCmd_ClearStarts) OTU(MCmd_ClearStarts) ]RES(Wrk_Starts);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"2\" Type=\"N\">\n<Comment>\n<CData>\nPCmd_ClearMaxHrs: Program Command to Clear Maximum Single Run Hours\nMCmd_ClearMaxHrs: Maintenance Command to Clear Maximum Single Run Hours\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(PCmd_ClearMaxHrs) [XIC(Cfg_PCmdClear) OTU(PCmd_ClearMaxHrs) ,NOP() ] ,XIC(MCmd_ClearMaxHrs) OTU(MCmd_ClearMaxHrs) ]CLR(Wrk_MaxHours)CLR(Val_MaxRunHrs);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"3\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nENABLE-IN FALSE HANDLING\n============================================================\nEnableIn False is treated the same as \"Motor Stopped\" --\nTotal run time is held (RTO), the Starts counter is prepared for\nthe next start (.CU clears on CTU with AFI), and the\nCurrent Run Time is cleared (TON false).\n\nNOTE: IN ORDER TO AVOID USING AN AFI (resulting in routine verification warnings in V17),\nTHIS RUNG USES AN XIC AND XIO OF THE SAME BIT TO ENSURE THE\nTIMERS AND COUNTER ARE SCANNED FALSE.\n\nTHIS IS NOT DEAD CODE.  IT IS INTENTIONALLY CODED THIS WAY FOR PROPER OPERATION.\n</CData>\n</Comment>\n<Text>\n<CData>\nXIC(Inp_Running)XIO(Inp_Running)RTO(Wrk_TotRunT,?,?)CTU(Wrk_Starts,?,?)TON(Wrk_CurRunT,?,?);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"4\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nREPORT VALUES\n============================================================\n\nThe number of starts is directly reported as an integer Value.\n</CData>\n</Comment>\n<Text>\n<CData>\nMOV(Wrk_Starts.ACC,Val_Starts);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"5\" Type=\"N\">\n<Comment>\n<CData>\nThe current hours working register is cleared, but the Value is left\nin place for display until the next run begins.\n\nNOTE: The Maximum Run Hours (high-water of Current Run Hours)\nis also left in place.\n</CData>\n</Comment>\n<Text>\n<CData>\nCLR(Wrk_CurHours);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"6\" Type=\"N\">\n<Comment>\n<CData>\nThe Total Running Time is reported as a REAL number of Hours.\n(This will always be in \"completed tenths\" of an hour, like a mechanical hours counter.)\n</CData>\n</Comment>\n<Text>\n<CData>\nMUL(Wrk_TotTenths,0.1,Val_TotRunHrs);\n</CData>\n</Text>\n</Rung>\n</RLLContent>\n</Routine>\n<Routine Name=\"Logic\" Type=\"RLL\">\n<Description>\n<CData>\nAccumulate Run Time (if runnings) and Count Starts\n</CData>\n</Description>\n<RLLContent>\n<Rung Number=\"0\" Type=\"N\">\n<Comment>\n<CData>\nCopyright \u00a9 Rockwell Automation, Inc.  All Rights Reserved.\n============================================================\nP_RunTime:  PROCESS -- RUN TIME AND STARTS\n============================================================\nRevision 3.5-01 Release  2016-01-29:  See V3.5-xx Release Notes for details.\nV1.x, V2.x Revision History archived.\nV3.0-00  2013-06-30:  Added Inf_Lib. Added display of Local STRING Tags\non header (this) rung..\nV3.1-00  2014-06-30:  Unmodified for Library of Process Objects V3.1, up-rev only.\nV3.1-01  2014-09-03:  Unmodified, up-rev only for V3.1-01 public release.\nV3.5-01  2016-01-29:  Unmodified, up-rev only for V3.5-01 Release.\n============================================================\nThis Instruction monitors the \"Running\" and \"Starting\" Status of a motor or other device and  provides:\n\n*  Total accumulated run time, in 1/10 hour increments (hour meter)\n*  Total number of starts or start attemptes (count)\n*  Maximum continuous run time for any start (hours)\n* Commands to allow clearing of the totals/maximum\n============================================================\nSHOW LOCAL STRINGS\n============================================================\nThe STRINGs containing the text associated with each instance of this\ninstruction cannot be Input or Output Parameters, because STRINGs are not\n 'atomic' types. (Inputs and Outputs must be SINT, INT, DINT, REAL, or BOOL.)\n\nIn order to make it easier to find and configure these STRINGs, this rung\nwas added.  THE JMP (and the LBL on the following rung)\nMUST NOT BE REMOVED!!!\n\nTo view the STRINGs, go to the instruction instance (in LD or FBD), RIGHT-click\nto bring up the context menu and select \"Open Instruction Logic\".\nThis rung will appear with the STRING values for the selected instance.\nYou may double-click the STRING values here to modify them as well.\n</CData>\n</Comment>\n<Text>\n<CData>\nJMP(SkipText)CONCAT(Cfg_Desc,Cfg_Label,Cfg_Tag)LOWER(Inf_Lib,Inf_Type);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"1\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nCOMMAND PROCESSING\n============================================================\nThese rungs handle received Commands.  This object has no Modes and\nCommands are accepted regardless of Mode.  Commands should be\nrestriceted to authorized personnel (typically at a maintenance level).\n\nPCmd_ClearTotHrs: Program Command to Clear Total Runtime Hours\nMCmd_ClearTotHrs: Maintenance Command to Clear Total Runtime Hours\n</CData>\n</Comment>\n<Text>\n<CData>\nLBL(SkipText)[XIC(PCmd_ClearTotHrs) [XIC(Cfg_PCmdClear) OTU(PCmd_ClearTotHrs) ,NOP() ] ,XIC(MCmd_ClearTotHrs) OTU(MCmd_ClearTotHrs) ]RES(Wrk_TotRunT)CLR(Wrk_TotTenths);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"2\" Type=\"N\">\n<Comment>\n<CData>\nPCmd_ClearStarts: Program Command to Clear Count of Starts\nMCmd_ClearStarts: Maintenance Command to Clear Count of Starts\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(PCmd_ClearStarts) [XIC(Cfg_PCmdClear) OTU(PCmd_ClearStarts) ,NOP() ] ,XIC(MCmd_ClearStarts) OTU(MCmd_ClearStarts) ]RES(Wrk_Starts);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"3\" Type=\"N\">\n<Comment>\n<CData>\nPCmd_ClearMaxHrs: Program Command to Clear Maximum Single Run Hours\nMCmd_ClearMaxHrs: Maintenance Command to Clear Maximum Single Run Hours\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(PCmd_ClearMaxHrs) [XIC(Cfg_PCmdClear) OTU(PCmd_ClearMaxHrs) ,NOP() ] ,XIC(MCmd_ClearMaxHrs) OTU(MCmd_ClearMaxHrs) ]CLR(Wrk_MaxHours);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"4\" Type=\"N\">\n<Comment>\n<CData>\nClear current run hours if stopped.\nNOTE: Val_CurHours is maintained for display!\n</CData>\n</Comment>\n<Text>\n<CData>\nXIO(Inp_Starting)XIO(Inp_Running)RES(Wrk_CurRunT)CLR(Wrk_CurHours);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"5\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nACCUMULATE TIMES / STARTS\n============================================================\nThis rung runs the Total (retentive) and Maximum (non-retentive) Run Time\ntimers and increments the Number of Starts counter  whenever\n the motor/device is Starting or Running (contactor energized...).\n\nNOTE:  The counter only counts on the rising edge of the rung.  As long as\nthere's no delay between Starting going OFF and Running coming ON, this will work fine.\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(Inp_Starting) ,XIC(Inp_Running) ][RTO(Wrk_TotRunT,?,?) ,CTU(Wrk_Starts,?,?) ,TON(Wrk_CurRunT,?,?) ];\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"6\" Type=\"N\">\n<Comment>\n<CData>\nNote that an RTO timer can only time up to 2G milliseconds, about 28 days.\nA pump will accumulate much more run time.  So the RTO is used to time 1/10 hour,\nwhich is then added to a count of \"Tenths of Hours\".  Then the RTO accumulator is reduced by 1/10 hour.\n(The timer doesn't lose time because it is not reset and keeps running.)\n</CData>\n</Comment>\n<Text>\n<CData>\nGEQ(Wrk_TotRunT.ACC,360000)ADD(Wrk_TotTenths,1,Wrk_TotTenths)SUB(Wrk_TotRunT.ACC,360000,Wrk_TotRunT.ACC);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"7\" Type=\"N\">\n<Comment>\n<CData>\nThe Maximum Run Time TON is treated the same way.  A motor/device\ncould potentially run continuously for more than 28 days, so an integer count\nof (up to 2 billion) hours (almost 245,000 years!) is used.  Should be enough...\n</CData>\n</Comment>\n<Text>\n<CData>\nGEQ(Wrk_CurRunT.ACC,3600000)ADD(Wrk_CurHours,1,Wrk_CurHours)SUB(Wrk_CurRunT.ACC,3600000,Wrk_CurRunT.ACC);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"8\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nREPORT VALUES\n============================================================\n\nThe number of starts is directly reported as an integer Value.\n</CData>\n</Comment>\n<Text>\n<CData>\nMOV(Wrk_Starts.ACC,Val_Starts);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"9\" Type=\"N\">\n<Comment>\n<CData>\nThe Current (continuous) Run Time is reported as a REAL number of Hours.\nThis number includes all fractional hours (timer accumulator / 3,600,000 ms/hr),\nnot just completed tenths like the total run time below.\n</CData>\n</Comment>\n<Text>\n<CData>\n[XIC(Inp_Starting) ,XIC(Inp_Running) ]CPT(Val_CurRunHrs,Wrk_CurHours+(Wrk_CurRunT.ACC/3600000.0));\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"10\" Type=\"N\">\n<Comment>\n<CData>\nIf the Current Run Time exceeds the stored Maximum Run Time,\nupdate the Maximum.\nRegardless, report the Maximum Run Time.\n\nNOTE:  The Wrk_MaxHours register is required to prevent writes to Val_MaxHours\nfrom improperly overwriting this object's state.\n\n</CData>\n</Comment>\n<Text>\n<CData>\n[GRT(Val_CurRunHrs,Wrk_MaxHours) MOV(Val_CurRunHrs,Wrk_MaxHours) ,MOV(Wrk_MaxHours,Val_MaxRunHrs) ];\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"11\" Type=\"N\">\n<Comment>\n<CData>\nThe Total Running Time is reported as a REAL number of Hours.\n(This will always be in \"completed tenths\" of an hour, like a mechanical hours counter.)\n</CData>\n</Comment>\n<Text>\n<CData>\nMUL(Wrk_TotTenths,0.1,Val_TotRunHrs);\n</CData>\n</Text>\n</Rung>\n</RLLContent>\n</Routine>\n<Routine Name=\"Prescan\" Type=\"RLL\">\n<Description>\n<CData>\nSet Current Run time internally to 0.  Display value is left in place.\n</CData>\n</Description>\n<RLLContent>\n<Rung Number=\"0\" Type=\"N\">\n<Comment>\n<CData>\n============================================================\nPOWERUP / PRESCAN HANDLING\n============================================================\nTotal run time, Maximum run time and starts count are retained through\na power cycle.  Current run time is reset (internally only,\nVal_CurHours is maintained for display!).\n</CData>\n</Comment>\n<Text>\n<CData>\nRES(Wrk_CurRunT)CLR(Wrk_CurHours);\n</CData>\n</Text>\n</Rung>\n<Rung Number=\"1\" Type=\"N\">\n<Comment>\n<CData>\nOn Prescan, clear any \"lurking\" Commands.\n</CData>\n</Comment>\n<Text>\n<CData>\n[OTU(MCmd_ClearMaxHrs) OTU(MCmd_ClearTotHrs) OTU(MCmd_ClearStarts) ,OTU(PCmd_ClearMaxHrs) OTU(PCmd_ClearTotHrs) OTU(PCmd_ClearStarts) ];\n</CData>\n</Text>\n</Rung>\n</RLLContent>\n</Routine>\n</Routines>\n<Dependencies>\n<Dependency Name=\"STRING_40\" Type=\"DataType\"/>\n<Dependency Name=\"STRING_20\" Type=\"DataType\"/>\n<Dependency Name=\"STRING_12\" Type=\"DataType\"/>\n</Dependencies>\n</AddOnInstructionDefinition>"